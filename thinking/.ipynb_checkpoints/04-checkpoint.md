### Thinking

**1. 高德地图中的路径规划原理是怎样的？**

首先，传统的基于图搜索的算法dijkstra是无法满足互联网地图检索实时响应这种性能要求，常用的预处理方式包括分层，如从广州到北京，开车怎么走，首先要计算经过多少城市，从每个城市到下一个城市之间如何走才能用高速连接起来，你需要访问的数据就小很多，当最后可以约束到一个区这么大的地方。预计算的方式，即采用提前运算存储起来。具体采用何种方式，这取决于采用的加速算法相关。2008年前后，以KIT为主的研究院的contraction hierarchies和highway hierarchies较为出名，加之微软研究院提出的Customizable Route Planning，与传统的A-star，基本上支撑了目前工业界地图产品的路径规划服务。 

**2. football.gml数据集中，美国大学生足球联赛，包括115支球队，被分为12个联盟。为什么使用LPA标签传播进行社区发现，只发现了11个社区？**

其实可以发现12个球队的

![](imgs/th-4-1.png)

具体原因是算法本身的问题，LPA的基本步骤如下：

1. 初始化整个graph。对于graph中的每个node，分配一个唯一的一个label

2. 开始计算每个node新的label。计算规则是，统计node周围所有的邻居的label，出现次数最多的label将被设置成这个node的新label

3. 若邻居中出现次数最多的label有多个，那么随机选择其中一个label（如在起始计算中，由于每个node的label都是唯一的，所以每个node周围所有label出现次数都是1，这时候相当于随机选择一个邻居label作为自己的label）

4. 计算所有node之后，判断是否达到了终止条件，若没有，回到2继续计算

5. 经过几次迭代，达到终止条件，算法完成。在图中，具有相同label的node属于同一个community

其中可能发生变动的是第3步的随机选择，因为当前随机选择的label，会直接影响下一次的node的label的标定，若某一次label选择了此node之前从未出现的label，那么可能对于总体graph的label可能会多一个，因此会出现11-12个分组。

**3. 微博采用了类似FaceBook的EdgeRank算法，如果你给微博的信息流做设计，你会如何设计？**

信息流一般指一个聚合了无数个动态的页面，因此信息流类产品普遍又叫NewsAggrerator（信息聚合器）。信息流并非都是以个性化算法驱动的，恰恰相反最早的信息流以RSS协议驱动，往往严格采用“关注-时间”两个要素进行排序。即只有用户主动关注的主体发布的动态会出现，所有动态严格依照发布时间排序。只是在个性化算法引入之前，信息流的概念在国内并不流行。

国内流行的信息流，一般指个性化信息流，它通过个性化算法驱动，“关注”与“时间”两个要素降级为个性化算法中的两个参数受权重影响。即便是用户没有关注的或者是较早发布的内容，只要算法判断用户可能对该内容感兴趣，便也可能出现在信息流里。

2010年左右第一版EdgeRank算法问世。EdgeRank主要有三个因素在起作用：

- **亲密度：**量化考虑平常里你和这个朋友“走动”是否频繁，连接是否紧密。是点赞之交，还是评论之交，或是私信之交。
- **边的权重：**点赞、评论、发一条文字、发一张照片、发一个链接，背后用户付出的成本不一样，反应在边的权重上也就不一样，成本越高的，权重越大。
- **新鲜程度：**新的新鲜事总体上更可能得到用户的喜爱，Facebook用了一个与时间相关的指数衰减函数来量化动态的新旧程度。

值得注意的是，此时的EdgeRank基本上只考虑了社交方面的因素，而没有考虑太多内容本身对用户吸引力，也就是说EdgeRank**并不是个性化算法**，只是打破了信息一定与时间相关的这一惯性思路。这在以关系为主的社交网络中比较有效，但**不太适合Twitter、微博和后来的个性化新闻客户端**这种媒体属性较强的网络。

其与Facebook Top Story的算法类似，通过很多因素来决定一条动态的分值，最终通过评估调节至某个理想的指标。这些因素可以大致分为（参考Facebook 的 EdgeRank 算法）：

- 时效性

在“智能排序”算法中，时效性不像之前那样，是决定微博排序的唯一因素。但微博是用户活跃度、在线时长都非常高的产品，**时效性**仍然是非常重要的因素。当然，这个因素可能会根据不同用户的登录频度来进行调整。

- 内容质量

对于一条微博，能够判定其内容质量的要素分为三个部分：

1. **创作者（包括转发人）的权重（People Rank）**、其**是否为加 V / 企业帐号 / 会员 / 认证**等等，具体取决于新浪对于内容质量的判定方式，其他还可能包括微博来源（第三方应用 / 合作方）等；
2. **内容本身**：内容长度、是否有图片 / 视频、链接数目（链接权重）、是否 @ 人（所 @ 人数），是否为疑似广告内容等
3. **热度**：转发、评论、收藏（的数量、质量）等

- 个性化

通过各种数据计算出的你所喜欢的领域和话题、喜欢的微博帐号会得到更高的分值。

[知乎](https://www.zhihu.com/question/24870090)

[CSDN](https://blog.csdn.net/aiyinsimei/article/details/74170002)

[github](https://github.com/anatman-xx/lpa/blob/master/lpa.py)

[人人都是产品经理](http://www.woshipm.com/pd/2221252.html)